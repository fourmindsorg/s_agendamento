# ========================================
# Configuração Terraform - AWS Free Tier
# ========================================
# Copie este arquivo para terraform.tfvars e configure os valores
# cp terraform.tfvars.example terraform.tfvars

# ========================================
# Configurações Básicas
# ========================================

# Região AWS (Free Tier disponível em todas as regiões)
aws_region = "us-east-1"

# Nome do projeto (usado em nomes de recursos)
project_name = "sistema-agendamento"

# Ambiente (dev, staging, prod)
environment = "prod"

# ========================================
# Configurações do Banco de Dados RDS
# ========================================

# Usuário do banco de dados PostgreSQL
db_username = "postgres"

# Senha do banco de dados (ALTERE para uma senha forte!)
# Requisitos: mínimo 8 caracteres, letras maiúsculas, minúsculas e números
db_password = "ALTERE_ESTA_SENHA_FORTE_123"

# ========================================
# Configurações do RDS - FREE TIER
# ========================================
# Free Tier: db.t2.micro - 750 horas/mês
# Free Tier: 20GB de armazenamento SSD (gp2)
# Free Tier: 20GB de backup
# Free Tier: até 7 dias de retenção de backup

db_instance_class = "db.t2.micro"  # FREE TIER: 750 hours/month
allocated_storage = 20              # FREE TIER: up to 20GB
max_allocated_storage = 20          # Keep at 20GB for Free Tier
backup_retention_period = 7         # FREE TIER: up to 7 days
multi_az = false                    # Single-AZ for Free Tier (Multi-AZ tem custo)
deletion_protection = false         # Proteção contra exclusão acidental

# ========================================
# Domínio e SSL
# ========================================

# Seu domínio personalizado
domain_name = "fourmindstech.com.br"

# Habilitar SSL/TLS (Requer configuração no servidor)
enable_ssl = true

# ARN do certificado SSL do AWS Certificate Manager (opcional)
# Se vazio, será usado Let's Encrypt no servidor
ssl_certificate_arn = ""

# ========================================
# Configurações da Instância EC2
# ========================================
# Free Tier: t2.micro - 750 horas/mês
# Free Tier: 30GB de armazenamento EBS

instance_type = "t2.micro"  # FREE TIER: 750 hours/month

# ========================================
# Configurações de Rede
# ========================================

# CIDR blocks permitidos para SSH (0.0.0.0/0 permite de qualquer lugar)
# Para maior segurança, restrinja ao seu IP específico
allowed_cidr_blocks = ["0.0.0.0/0"]

# ========================================
# Monitoramento e Alertas
# ========================================
# Free Tier CloudWatch:
# - 10 métricas customizadas
# - 10 alarmes
# - 5GB de logs (ingestão e armazenamento)
# - 1,000,000 de API requests

enable_monitoring = true

# Limites para alertas (porcentagem)
cpu_threshold = 80
memory_threshold = 80
disk_threshold = 85

# Email para receber notificações de alertas
# Free Tier SNS: 1,000 notificações de email por mês
notification_email = "fourmindsorg@gmail.com"

# Retenção de logs CloudWatch (dias)
# Free Tier: 5GB de armazenamento
log_retention_days = 7

# ========================================
# Recursos Adicionais (Desabilitados no Free Tier)
# ========================================

# CloudFront CDN (NÃO incluído no Free Tier após primeiro ano)
# Free Tier: 50GB de transferência de dados, 2,000,000 requisições HTTP/HTTPS
enable_cloudfront = false

# WAF (NÃO incluído no Free Tier)
enable_waf = false

# ========================================
# Tags Personalizadas
# ========================================

tags = {
  Environment = "production"
  Project     = "sistema-agendamento"
  Owner       = "4Minds"
  Domain      = "fourmindstech.com.br"
  FreeTier    = "true"
  ManagedBy   = "Terraform"
}

# ========================================
# RESUMO FREE TIER AWS (12 meses)
# ========================================
#
# EC2:
#   - 750 horas/mês de instância t2.micro
#   - 30GB de armazenamento EBS (SSD ou magnético)
#   - 1GB de snapshots
#
# RDS:
#   - 750 horas/mês de instância db.t2.micro
#   - 20GB de armazenamento gp2
#   - 20GB de backup
#
# S3:
#   - 5GB de armazenamento padrão
#   - 20,000 GET requests
#   - 2,000 PUT requests
#
# CloudWatch:
#   - 10 métricas customizadas
#   - 10 alarmes
#   - 5GB de logs
#   - 1,000,000 API requests
#
# SNS:
#   - 1,000 notificações de email
#
# Data Transfer:
#   - 15GB de saída (out) por mês
#   - 100GB de entrada (in) por mês
#
# ========================================
# IMPORTANTE: LIMITES E CUSTOS
# ========================================
#
# 1. Execute apenas UMA instância EC2 t2.micro (750h/mês = ~31 dias)
# 2. Execute apenas UMA instância RDS db.t2.micro
# 3. Mantenha armazenamento total abaixo de 30GB (EC2 + RDS)
# 4. Monitore uso mensal no AWS Cost Explorer
# 5. Configure alertas de billing no AWS Console
# 6. Free Tier é válido por 12 meses após criar conta AWS
#
# ========================================

